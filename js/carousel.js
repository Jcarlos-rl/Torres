function Popup(){this.$document=$(document),this.$window=$(window),this.popup={},this._onWindowResize=function(){general.centerItem(this.popup.wrapper)},this.display=function(e){var t=this;this.popup.background.css("background-image","none"),this.initializeElements(e);var i=null;i=$(".cont-image-popup").length?$(".cont-image-popup"):$("<div class='cont-image-popup'></div>");for(var n in this.popup)"background"!==n&&(this.popup[n].appendTo(i),"IMG"==this.popup[n].get(0).tagName&&(general.scaleImage(this.popup[n]),general.centerItem(this.popup[n],!0)));i.appendTo("body"),general.centerItem(i),t._onWindowResize();for(var n in t.popup)"background"===n||t.popup[n].is(":visible")||t.popup[n].fadeIn("fast");this.$window.on("resize.popup",function(){t._onWindowResize()}),this.$document.on("keydown",function(e){27===e.keyCode&&t.hide()})},this.hide=function(){for(var e in this.popup){var t=this.popup[e];"IMG"==this.popup[e].get(0).tagName&&(t=this.popup[e].parent()),t.fadeOut("fast",function(){$(this).remove()})}this.$window.off("resize.popup"),this.$document.off("keydown")},this.initializeElements=function(e){var t=this;this.popup.background.on("click",function(){t.hide()}),this.popup.wrapper=$("<div>").addClass("popup wrapper").append(e),this.popup.closeButton=$("<div>").addClass("popup close-button").text("x").on("click",function(){t.hide()})},this.loading=function(){this.popup.background=$("<div>").addClass("popup background").appendTo("body"),this.popup.background.animate({opacity:"1"},"fast")}}function Gallery(){this.currentImage=null,this.currentPosition=0,this.totalImages=0,this.images=null,this._onWindowResize=function(){general.scaleImage(this.currentImage),general.centerItem(this.currentImage,!0),general.centerItem(this.popup.leftButton,!0),general.centerItem(this.popup.rightButton,!0),general.centerItem($(".cont-image-popup"))},this.actualizeImage=function(){var e=this;this.currentImage=$("<img>").attr("src",this.images.eq(this.currentPosition).attr("src")),this.currentImage.addClass("gallery image");var t=null;t=$(".cont-image-popup").length?$(".cont-image-popup"):$("<div class='cont-image-popup'></div>"),this.popup.image.stop(!0,!0).fadeOut("fast",function(){$(this).remove(),e.popup.image=null,e.popup.image=e.currentImage,e.popup.image.appendTo(t),t.appendTo("body"),general.centerItem(t),general.scaleImage(e.currentImage),general.centerItem(e.currentImage,!0),e.popup.image.stop(!0,!0).fadeIn("fast")})},this.isNext=function(e){"left"===e?this.currentPosition<=0?this.currentPosition=this.totalImages-1:this.currentPosition--:this.currentPosition<this.totalImages-1?this.currentPosition++:this.currentPosition=0,this.actualizeImage()},this.initializeElements=function(e){var t=this;this.images=e.data("images"),this.currentPosition=e.data("position"),this.totalImages=this.images.length>0?this.images.length-1:0,this.currentImage=$("<img>").attr("src",this.images.eq(this.currentPosition).attr("src")),this.popup.leftButton=$("<div>").addClass("gallery left-button").on("click",function(){t.isNext("left")}),this.popup.rightButton=$("<div>").addClass("gallery right-button").on("click",function(){t.isNext("right")}),this.popup.image=this.currentImage.addClass("gallery image"),Gallery.prototype.initializeElements(this.currentImage),delete this.popup.wrapper,this.$document.on("keydown",function(e){37===e.keyCode?t.isNext("left"):39===e.keyCode&&t.isNext("right")})}}var general={$window:null,$document:null,adaptContents:null,curAnchor:"",scrollDirection:"down",course:null,carrousel:null,globalNav:null,header:null,home:null,navHeader:null,months:[],mobileb:null,offsets:{},pageLogo:null,sections:null,sectionsTranslate:null,typeStyles:null,scrollTop:null,scrolltop:null,init:function(){general.$window=$(window),general.$document=$(document),general.scrollTop=general.$window.scrollTop(),general.sections=$(".section, .section-effects"),general.contNav=$(".cont-nav"),general.globalNav=$(".global-nav, .global-nav-footer"),general.mobileb=$("#mobile-button"),general.header=$(".header"),general.home=$(".content-home"),general.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],general.pageLogo=$(".header .cont-logo a"),general.menuMobile(),general.initSliders(),general.initCarrousel(),general.initMaps(),general.disableClickLogo(),general.setLogoBehavior(),general.BlogPage.init(),general.navHeader.init(),general.adaptContents.init(),general.centerItem($(".loader"),!1,function(){$(".loader").css("opacity","1")}),$(".jc-base.text").addClass("logo-goplek").html(""),$(".jc-base.text").addClass("sprite"),general.$window.on("load",function(){general._onLoad()}),general.$window.on("resize",function(){general._onResize()}),general.$window.on("scroll",function(){general._onScroll()})},_onLoad:function(){$("html, body").stop(!0,!0).animate({scrollTop:0},1),general.showGallery(),general.BlogPage._onLoad(),general.navHeader._onLoad(),general.adaptContents._onLoad(),$(".init-loader").fadeOut("fast",function(){general.urlChecker(),setTimeout(function(){general.actualize()},300),general.isMobile()?general.home.css("z-index","-1"):general.home.css("z-index","0")}),general.isMobile()?(general.home.addClass("down-level"),general.sections.find(".inview-element").removeClass("inview-element")):general.home.addClass("primary-level"),general.$window.width()<768&&$(".gallery").length?general.carrousel.setThumbsToDisplay(2):$(".gallery").length&&general.carrousel.setThumbsToDisplay(4)},_onResize:function(){general.BlogPage._onResize(),general.adaptContents._onResize(),general.mobileb.removeClass("active"),$("main").css("right",0),general.contNav.css("right","-100%"),general.$window.width()<768&&$(".gallery").length?general.carrousel.setThumbsToDisplay(2):$(".gallery").length&&general.carrousel.setThumbsToDisplay(4),general.disableClickLogo()},_onScroll:function(){general.$window.scrollTop()>general.scrollTop?general.scrollDirection="down":general.scrollDirection="up",general.scrollTop=general.$window.scrollTop(),general.navHeader._onScroll(),general.isMobile()||general.actualize(),general.disableClickLogo()},actualize:function(){function e(e){var t=e.find(".group-inview"),i=null;t.length?(i=t.find(".inview-element"),t.children(".inview-element").length&&(i=t.children(".inview-element"))):i=e.find(".inview-element"),i.length&&i.each(function(){var e=$(this);e.data("invieweffect")?(e.addClass(e.data("invieweffect")),general.applyElementEffect(i)):console.log("Element has not effect id.")}),e.one("inview",function(e,t,n,s){t&&G.applyElementEffect(i)})}general.calcTop(),general.getOffsets();for(var t in general.offsets){var i=general.offsets[t];general.scrolltop>=i.start&&general.scrolltop<i.end&&(general.navHeader.activeOptions(i),general.isMobile()||i.elem.hasClass("section-effects")&&e(i.elem))}},adaptContents:{init:function(){if(this.sameHeight($(".elements-height")),this.reviewContent(),"/"==location.pathname){var e=$(".departments").find(".department"),t=e.filter("[href*=pescaderia]"),i=e.filter("[href*=panaderia]"),n=t.parent(),s=t.prev();n.append(t),i.insertAfter(s)}},_onLoad:function(){this.adaptBackgrounds($(".adapt-content"))},_onResize:function(){this.sameHeight($(".elements-height")),this.adaptBackgrounds($(".adapt-content"))},adaptBackgrounds:function(e){e.each(function(){$(this).hasClass("adapt-this")?general.centerItem($(this),!0):general.adaptItem($(this).find("img"))})},reviewContent:function(){var e=$("[data-parentkey]");if(e.length){var t=e.data("parentkey").toLocaleLowerCase();t&&(t.match(/blog/gi)?e.filter("[class*=content-departments]").remove():t.match(/departamentos/)&&e.filter("[class*=page-content]").remove())}},sameHeight:function(e){function t(e){var t=0;return e.children().each(function(){"absolute"==$(this).css("position")?$(this).height()>t&&(t=$(this).height()):$(this).height()>t&&(t+=$(this).height())}),t}e.each(function(){var e=$(this),i=e.find(".same-height"),n=0;i.each(function(){var e=t($(this));e>n&&(n=e)}),i.height(n)})}},adaptItem:function(e){function t(e){general.resizeItems(e),general.centerItem(e,!0)}e.length>1?e.each(function(){t($(this))}):t(e)},applyElementEffect:function(e){function t(e){var i=e.data("inviewtime")+"ms",n=e.data("inviewdelay");e.css({"transition-duration":i});var s=e.next(".inview-element");s.length?window.setTimeout(function(){e.addClass("displayed"),t(s)},n):window.setTimeout(function(){e.addClass("displayed");var i=e.parent().next(".group-inview");if(i.length){var n=i.find(".inview-element");t(n.eq(0))}},n)}t(e.eq(0))},BlogPage:{page:null,posts:null,postsContainer:null,init:function(){this.page=$("section.blog-content"),this.postsContainer=$("#posts-container"),this.page.length&&(this.postsContainer=$("#posts-container"),this.posts=this.postsContainer.find(".post"),this.initializeIsotope(),this.getDate(),this.setMore())},_onLoad:function(){general.adaptItem($(".post-slider").find("img")),this.initializeMobile(),general.$window.width()<530?$(this).removeClass("hidden"):$(this).addClass("hidden")},_onResize:function(){general.adaptItem($(".post-slider").find("img")),general.$window.width()<530?$(this).removeClass("hidden"):$(this).addClass("hidden")},getNumOfCols:function(){var e=parseInt(this.postsContainer.width());return e>767?3:767>=e&&e>499?2:1},getDate:function(){var e=this;e.posts.find(".date").each(function(){var e=$(this).html().split(" "),t=e[0].split("-"),i=e[1].split(":"),n=new Date(t[0],t[1],t[2],i[0],i[1],i[2],0),s=n.getDate(),a=general.months[n.getUTCMonth()-1],o=n.getUTCFullYear();$(this).html(s+" de "+a+", "+o)})},initializeIsotope:function(){var e=this,t=this.posts.find("img");general.waitForImages(t,function(){e.posts.detach(),e.posts.css("display","block"),e.postsContainer.css("background","none"),e.getNumOfCols(),e.posts.css("width",Math.floor(e.postsContainer.width()/e.getNumOfCols()));var t=e.postsContainer.isotope({itemSelector:".post",resizable:!1,masonry:{columnWidth:e.postsContainer.width()/e.getNumOfCols()}});e.postsContainer.isotope("insert",e.posts),general.$window.smartresize(function(){e.getNumOfCols(),e.posts.css("width",Math.floor(e.postsContainer.width()/e.getNumOfCols())),e.postsContainer.isotope({masonry:{columnWidth:e.postsContainer.width()/e.getNumOfCols()}})}),$("#sorts").on("click","button",function(){console.log($(this).attr("data-sort-by")),console.log(t);var e=$(this).attr("data-sort-by");t.isotope({sortBy:e})}),e.posts.css("display","block")})},initializeMobile:function(){var e=0,t=0,i=0,n=this;this.posts&&(this.posts.each(function(n){2>n&&(e+=$(this).outerHeight()),2==n&&(i=$(this).offset().top),t+=$(this).outerHeight()}),general.$window.width()<530&&this.posts.parent().height(e),$(".more-posts").click(function(){n.posts.parent().height(t),$("html, body").stop().animate({scrollTop:e+15},500),$(this).addClass("hidden")}))},setMore:function(){var e=this;e.posts.find(".description").each(function(){$("<a> mÃ¡s</a>").appendTo($(this))})}},calcTop:function(){general.scrolltop=general.$window.scrollTop()+general.$window.height()/2+general.$window.height()/3},centerItem:function(e,t,i){var n=t?e.parent():$(window),s=e.css("position"),a=(n.width()-e.outerWidth())/2,o=(n.height()-e.outerHeight())/2;"absolute"===s||"fixed"===s?e.css({left:a,top:o}):e.css({"margin-left":a,"margin-top":o}),i&&"function"==typeof i&&i()},disableClickLogo:function(){var e=.1*general.$document.innerHeight();"/"==location.pathname&&(general.$window.scrollTop()>e?general.pageLogo.removeClass("disabled"):general.pageLogo.addClass("disabled"))},getOffsets:function(){general.offsets={},general.sections.each(function(e){var t=$(this);general.offsets["section-"+e]={elem:t,start:t.offset().top,end:t.offset().top+t.outerHeight(),index:e}})},goToAnchor:function(e){if(e&&"javascript:void(0)"!==e&&"#"!==e&&$(e).length){var t=$(e).offset().top,i=Math.abs(general.$window.scrollTop()-t),n=650;n=650*i/800;var s=general.mobileb,a=$("main"),o=general.contNav.height();general.isMobile()?(general.testMenuMobile(s,a),o=general.header.height()):o-=18,$("html, body").stop().animate({scrollTop:t-o},n)}},initMaps:function(){$(".cont-map");if($("#googleMap").length){var e=new google.maps.LatLng(19.0504599,-98.2651601),t=[{featureType:"landscape",elementType:"geometry",stylers:[{color:"#e3e3e3"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#c5c5c5"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#1a1616"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{saturation:"-100"},{lightness:"-5"},{gamma:"1.99"},{weight:"2.32"}]},{featureType:"poi.park",elementType:"labels.icon",stylers:[{weight:"2.32"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#f3f3f3"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#8f6c6c"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#efefef"}]}],i=new google.maps.StyledMapType(t,{name:"Styled Map"}),n={center:e,zoom:15,scrollwheel:!1,disableDefaultUI:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}},s=new google.maps.Map(document.getElementById("googleMap"),n),a=new google.maps.Marker({position:e,map:s});a.setMap(s),s.mapTypes.set("map_style",i),s.setMapTypeId("map_style")}},initCarrousel:function(){var e=$(".util-carrousel"),t=e.find("img");if(e.length){e.children().not(t).remove(),t.each(function(){var e=$(this);e.wrap('<div class="thumb"></div>'),e.wrap('<div class="image"></div>'),e.wrap('<div class="inner-image"></div>')});var i={thumbsToDisplay:5,scaleImage:!1,delay:3e3,autoPlay:!1,showGallery:!0};general.carrousel=new util.Carrousel(e,i)}},initSliders:function(){var e=general.home.find(".slider2");e.length&&e.slider2({activeKeyControls:!1,displayTime:6e3,searchFor:".slide",showArrows:!1,showDots:!0},function(e){e.buttons.addClass("adapt-content"),e.buttons.addClass("adapt-this")})},isMobile:function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1},menuMobile:function(){general.mobileb.click(function(){var e=$(this),t=$("main");general.testMenuMobile(e,t)})},navHeader:{init:function(){if(this.testUl(),location.pathname.match(/blog/gi)){var e=general.globalNav.children("li").find("a").filter("[href*=blog]");e.parent().addClass("active"),e.removeAttr("href","")}else general.globalNav.children("li").children("a").filter("[href*=blog]").attr("href","http://frescura.com.mx/120884/blog.html")},_onLoad:function(){this.subMenu(),this.goNavs()},_onScroll:function(){},goNavs:function(){general.globalNav.children("li").not("[class*=sub-menu]").find("a").click(function(e){var t=$(this).attr("href"),i=/^#\w+/;t&&($(this).parent().addClass("active"),$(this).parent().siblings().removeClass("active")),i.test(t)&&(e.preventDefault(),general.goToAnchor(t))})},activeOptions:function(e){var t=general.globalNav.find("a").filter("[href*="+e.elem.attr("id")+"]");e.elem.parent().hasClass("section-nav")&&(t=general.globalNav.find("a").filter("[href*="+e.elem.parent().attr("id")+"]")),$(t).length&&(e.elem.hasClass("section-nav")||e.elem.parent().hasClass("section-nav"))?($(t).parent().addClass("active"),$(t).parent().siblings().removeClass("active"),general.curAnchor=e.elem.attr("id")):general.globalNav.find("li").removeClass("active")},subMenu:function(){general.globalNav.children("li").on("click",function(e){e.stopPropagation();var t=$(this);general.$window.width()<768&&(t.toggleClass("active"),t.children("ul").toggle(200))})},testUl:function(){function e(e,i){var n=e.find(".li-department");t(e,n,function(){i.append(e)})}function t(e,t,i){var n=0,s=e.find(".container-fluid"),a=null,o=0;t.each(function(){3>=n&&(0==n&&(a=null,a=$("<ul class='list-unstyled'>")),a&&(a.append($(this)),n++,o++),n>3&&(n=0,s.append($("<li>").append(a))))}),s.append($("<li>").append(a)),i&&"function"==typeof i&&i(this)}general.getOffsets(),general.globalNav.children("li").each(function(){var t=$(this),i=t.find("ul");if($(this).data("pageid")){var n=$(".global-nav-aux"),s=t.data("pageid"),a=n.filter("[data-parentid*="+s+"]");a.length>0?(n.removeClass("hidden"),t.addClass("sub-menu"),t.children("a").removeAttr("href"),e(n,t)):i.remove()}})}},resizeItems:function(e){var t=e.parent(),i=t.width(),n=t.width()*e.height()/e.width();n<t.height()&&(n=t.height(),i=t.height()*e.width()/e.height()),e.height(n),e.width(i)},scaleImage:function(e){var t=e.parent(),i=e.height(),n=e.width(),s=[t.width()/n,t.height()/i];s=Math.min(s[0],s[1]),e.width(n*s),e.height(i*s)},setLogoBehavior:function(){general.pageLogo.length&&general.pageLogo.on("click",function(e){var t=/^#(.*)$/,i=$(this).attr("href");return general.pageLogo.hasClass("disabled")?void e.preventDefault():void(t.test(i)&&(e.preventDefault(),general.goToAnchor(i)))})},showElementsInview:function(e){e.each(function(){var e=$(this).find(".inview-element");e.length&&e.each(function(){var t=$(this);t.data("invieweffect")?(t.addClass(t.data("invieweffect")),general.applyElementEffect(e)):console.log("Element has not effect id.")})})},showGallery:function(){function e(e,i){e.length&&general.waitForImages(e,function(){e.eq(0).data({images:e,position:i}),t.display(e)})}if($(".gallery").length){var t=new Gallery;$(".gallery").each(function(){var i=$(this),n=$(this);i.find("img").each(function(i){var s=$(this);s.on("click",function(){t.loading();var s=n.find("img"),a=i;e(s,a)})})})}},testMenuMobile:function(e,t){e.hasClass("active")?(t.animate({right:0},200),general.contNav.animate({right:"-100%"},200)):(t.animate({right:270},200),general.contNav.animate({right:0},200)),e.toggleClass("active")},urlChecker:function(){var e=location.hash;e&&setTimeout(function(){general.goToAnchor(e)},700)},waitForImages:function(e,t){function i(){++s>=n&&t&&"function"==typeof t&&t()}var n=e.length,s=0;e.each(function(){var e=$(this);e.get(0).complete?i():e.load(function(){i()})})}};$(general.init),function(e){var t=function(){function t(t,i,n){var s=this;this.element=t,this.settings=i,this.arrSlides=this.element.children(this.settings.searchFor),this.currentSlide=null,this.index=0,this.totalslides=this.arrSlides.length,this.itvl=null,this.slides2=e('<div class="slides">'),this.middlepoint=0,"img"===this.settings.searchFor&&this.arrSlides.length?general.waitForImages(this.arrSlides,function(){s.initialize(n)}):(this.images=this.arrSlides.find("img"),this.images.length?general.waitForImages(this.images,function(){s.initialize(n)}):this.initialize(n))}return t.prototype._onWindowResize=function(){1==this.settings.fullScreen&&general.adaptContents.slider2Content(),general.adaptContents.adaptBackgrounds(this.currentSlide.find(".adapt-content")),this.calcAspectRatio(),"img"===this.settings.searchFor?this.adaptImage(this.currentSlide):this.adaptImage(this.currentSlide.children(".background-image").children("img")),this.alignArrows(),this.settings.showThumbnails&&"img"===this.settings.searchFor&&this.alignThumbs(),this.settings.showLabels&&"img"===this.settings.searchFor&&this.displayLabels(),this.middlepoint=this.slides2.width()/2},t.prototype.adaptImage=function(t){function i(e){general.resizeItems(e),general.centerItem(e,!0)}t.length>1?t.each(function(){i(e(this))}):i(t)},t.prototype.alignArrows=function(){},t.prototype.actualizeThumbs=function(){var e=this.thumbs.children(".inner"),t=this.thumbs.data("posarr"),i=t[this.index],n=0;n=e.width()-i-this.element.width()>=0?i:i+(e.width()-i-this.element.width()),e.stop().animate({"margin-left":-n})},t.prototype.alignThumbs=function(){this.thumbs.width()>this.thumbs.children(".inner").width()?(this.thumbs.children(".inner").css("margin","0 auto"),this.thumbs.data("animate",!1)):(this.thumbs.children(".inner").css("margin","0"),this.thumbs.data("animate",!0),this.actualizeThumbs())},t.prototype.animation=function(){var t=this;if(this.currentSlide=this.arrSlides.eq(this.index).hide(function(){var t=e(this).find(".cont-text");t.removeClass("animate")}),this.slides2.children(this.settings.searchFor).stop(!0,!0).fadeOut(this.settings.transitionTime,function(){e(this).remove()}),this.slides2.append(this.currentSlide),this.currentSlide.stop(!0,!0).fadeIn(this.settings.transitionTime,function(){var i=e(this).find(".cont-text");i.addClass("animate"),general.adaptContents.adaptBackgrounds(t.currentSlide.find(".adapt-content"))}),"img"===this.settings.searchFor)this.adaptImage(this.currentSlide);else{var i=this.currentSlide.children(".background-image").children("img");this.adaptImage(i),this.currentSlide.find("a").click(function(t){var i=e(this).attr("href"),n=/^#\w+/;n.test(i)&&(t.preventDefault(),general.goToAnchor(i))})}if(this.settings.showLabels&&"img"===this.settings.searchFor){var n=e('<div class="strong">').text(this.currentSlide.attr("alt")||""),s=e("<div>").text(this.currentSlide.data("description")||""),a=e('<div class="alt">').append(n,s);this.slides2.children(".alt").stop(!0,!0).fadeOut(function(){e(this).remove()}),this.slides2.append(a),this.displayLabels()&&a.stop(!0,!0).fadeIn()}if(this.settings.showThumbnails&&"img"===this.settings.searchFor){var o=this.thumbs.find(".thumb").eq(this.index),r=this.thumbs.data("animate");o.addClass("selected").siblings(".thumb").removeClass("selected"),r&&this.actualizeThumbs()}if(this.settings.showDots){var l=this.dots.children(".button").eq(this.index);l.addClass("active").siblings().removeClass("active")}},t.prototype.calcAspectRatio=function(){if(!this.settings.calcAspectRatio)return!0;var e=this.settings.aspectRatio,t=0;t=e.h/e.w*this.slides2.width(),this.slides2.height(t)},t.prototype.createControls=function(){var t=this,i=e('<div class="controls">');this.prevButton=e('<div class="previous-slide">'),this.nextButton=e('<div class="next-slide">'),this.slides2.append(i,this.prevButton,this.nextButton),this.alignArrows(),this.middlepoint=this.slides2.width()/2;var n="right";this.slides2.on("mousemove",function(e){e.offsetX<t.middlepoint?n="left":e.offsetX>t.middlepoint&&(n="right")}),this.slides2.click(function(){t.isNext(n),t.resetTimer()})},t.prototype.createDots=function(){var t=this;this.buttons=e('<div class="buttons">'),this.element.append(this.buttons),this.dots=e('<div class="buttons-wrapper">'),this.buttons.append(this.dots),this.arrSlides.each(function(){var i=e('<div class="button">').appendTo(t.dots);i.click(function(){var i=e(this).index();i!==t.index&&(t.index=i,t.resetTimer(),t.animation())})})},t.prototype.createLayout=function(){this.element.append(this.slides2),this.calcAspectRatio(),"img"===this.settings.searchFor&&this.settings.showThumbnails&&this.createThumbs(),this.settings.showArrows&&this.createControls(),this.settings.showDots&&this.createDots(),this.settings.activeKeyControls&&general.$window.on("keydown",function(e){})},t.prototype.createThumbs=function(){var t=this;this.thumbs=e('<div class="thumbs">');var i=e('<div class="inner">'),n=0,s=[];this.element.append(this.thumbs),this.thumbs.append(i),this.arrSlides.each(function(){var a=e(this).clone(),o=e('<div class="thumb">').append(a),r=0,l=0;i.append(o),s.push(n),(o.css("margin-right")||o.css("margin-left"))&&(r=o.css("margin-right"),l=o.css("margin-left"),r=parseInt(r),l=parseInt(l)),n+=o.width(),n+=r,general.adaptItem(a),a.fadeIn(function(){var i=e(this);i.hover(function(){i.stop().animate({opacity:1})},function(){i.stop().animate({opacity:1})}),o.click(function(){var i=e(this).index();i!==t.index&&(t.index=i,t.resetTimer(),t.animation())})})}),i.width(n),this.thumbs.data("posarr",s),this.alignThumbs()},t.prototype.displayLabels=function(){return this.slides2.height()<275?(this.slides2.children(".alt").hide(),!1):(this.slides2.children(".alt").show(),!0)},t.prototype.initialize=function(e){var t=this;this.element.css("background-image","none"),this.arrSlides.detach(),this.element.empty(),this.createLayout(),this.animation(),this.arrSlides.length>1&&(this.itvl=setInterval(function(){t.isNext("right")},this.settings.displayTime)),general.$window.on("resize",function(){t._onWindowResize()}),e&&"function"==typeof e&&e(this)},t.prototype.isNext=function(e){"left"===e?this.index<=0?this.index=this.totalslides-1:this.index--:this.index>=this.totalslides-1?this.index=0:this.index++,this.animation()},t.prototype.randomize=function(){},t.prototype.resetTimer=function(){var e=this;this.itvl&&"number"==typeof this.itvl&&this.arrSlides.length>1&&(clearInterval(this.itvl),this.itvl=setInterval(function(){e.isNext("right")},this.settings.displayTime))},t}();e.fn.slider2=function(i,n){var s=e.extend({aspectRatio:{h:520,w:825},fullScreen:!1,activeKeyControls:!0,calcAspectRatio:!1,displayTime:1e4,searchFor:"img",showThumbnails:!0,showArrows:!0,showLabels:!1,showDots:!1,transitionTime:400},i);return this.each(function(){var i=e(this);i.find(s.searchFor).length>0&&new t(i,s,n)})}}(jQuery);var util;!function(e){var t=function(){function e(e,t){var i=this;e&&e instanceof jQuery&&e.length&&(this.$window=$(window),this.elem=e,this.thumbs=this.elem.find(".thumb").detach(),this.increasedThumbs=this.thumbs,this.thumbsImages=this.increasedThumbs.find(".image img"),this.settings=$.extend(this.getDefaultSettings(),t),this.currentThumb=0,this.interval=null,this.createLayout(),this.calculateWidths(),this.displayImages(this.thumbsImages),this.initAutoPlay(),this.$window.on("resize",function(){i.onResize()}))}return e.prototype.onResize=function(){this.calculateWidths(),this.adaptImage(this.thumbsImages),this.animate(!1)},e.prototype.getDefaultSettings=function(){return{autoPlay:!1,delay:2e3,infiniteScroll:!0,thumbsToDisplay:3,scrollSpeed:500,scaleImage:!1,showGallery:!1}},e.prototype.adaptImage=function(e){var t=this,i=function(e){t.settings.scaleImage?t.scaleImage(e):t.resizeImage(e,!0),t.centerItem(e,!0)};e.length>1?e.each(function(e,t){i($(t))}):1===e.length&&i(e)},e.prototype.animate=function(e){"undefined"==typeof e&&(e=!0);var t=-(this.thumbs.outerWidth(!0)*this.currentThumb),i=e?this.settings.scrollSpeed:0;this.thumbsContainer.stop().animate({"margin-left":t},i)},e.prototype.calculateWidths=function(){var e=parseInt(this.thumbs.css("margin-left"))+parseInt(this.thumbs.css("margin-right")),t=this.carrouselWrapper.width()/this.settings.thumbsToDisplay,i=t*this.increasedThumbs.length;this.thumbsContainer.width(i),this.increasedThumbs.width(t-e)},e.prototype.centerItem=function(e,t,i){"undefined"==typeof i&&(i="BOTH");var n=t?e.parent():$(window),s=e.css("position"),a=(n.outerWidth()-e.outerWidth())/2,o=(n.outerHeight()-e.outerHeight())/2;"absolute"===s||"fixed"===s?(("HORIZONTAL"===i||"BOTH"===i)&&e.css({left:a}),("VERTICAL"===i||"BOTH"===i)&&e.css({top:o})):(("HORIZONTAL"===i||"BOTH"===i)&&e.css({"margin-left":a}),("VERTICAL"===i||"BOTH"===i)&&e.css({"margin-top":o}))},e.prototype.cloneThumbs=function(){if(this.settings.infiniteScroll){this.increasedThumbs=this.thumbs;for(var e=0;e<this.settings.thumbsToDisplay;e++)this.increasedThumbs=this.increasedThumbs.add(this.thumbs.eq(e).clone());this.thumbsImages=this.increasedThumbs.find(".image img")}},e.prototype.createLayout=function(){var e=this;this.carrouselWrapper=$('<div class="carrousel-wrapper">'),this.thumbsContainer=$('<div class="thumbs-container clearfix">'),this.prevButton=$('<div class="prev-button">'),this.nextButton=$('<div class="next-button">'),this.elem.append(this.prevButton,this.carrouselWrapper,this.nextButton),this.cloneThumbs(),this.thumbsContainer.append(this.increasedThumbs),this.carrouselWrapper.append(this.thumbsContainer),this.prevButton.on("click",function(t,i){e.next("prev",i)}),this.nextButton.on("click",function(t,i){e.next("next",i)})},e.prototype.displayImages=function(e){var t=this;e.each(function(e,i){var n=$(i);t.waitForImages(n,function(){t.adaptImage(n),n.fadeIn("slow")})})},e.prototype.initAutoPlay=function(){var e=this;this.settings.autoPlay&&(this.interval=window.setInterval(function(){e.nextButton.trigger("click",[!0])},this.settings.delay))},e.prototype.next=function(e,t){if("undefined"==typeof t&&(t=!1),t||this.resetAutoPlay(),"prev"===e)this.currentThumb>0?this.currentThumb--:this.settings.infiniteScroll&&(this.thumbsContainer.css("margin-left",-(this.thumbs.length*this.thumbs.outerWidth(!0))),this.currentThumb=this.thumbs.length-1);else{var i=this.settings.infiniteScroll?this.thumbs.length:this.thumbs.length-this.settings.thumbsToDisplay;this.currentThumb<i?this.currentThumb++:this.settings.infiniteScroll&&(this.currentThumb=1,this.thumbsContainer.css("margin-left",0))}this.animate(!0)},e.prototype.resetAutoPlay=function(){this.interval&&(window.clearInterval(this.interval),this.initAutoPlay())},e.prototype.resizeImage=function(e,t){"undefined"==typeof t&&(t=!1);var i=e.parent(),n=t?i.outerWidth():i.width(),s=t?i.outerHeight():i.height(),a=n,o=n*e.height()/e.width();s>o&&(o=s,a=s*e.width()/e.height()),e.height(o),e.width(a)},e.prototype.setThumbsToDisplay=function(e){this.settings.thumbsToDisplay=e,this.cloneThumbs(),this.thumbsContainer.empty().append(this.increasedThumbs),this.calculateWidths(),this.adaptImage(this.thumbsImages),this.animate(!1),this.settings.showGallery&&general.showGallery()},e.prototype.scaleImage=function(e){var t=e.parent(),i=e.height(),n=e.width(),s=[t.outerWidth()/n,t.outerHeight()/i];s=Math.min(s[0],s[1]),e.width(n*s),e.height(i*s)},e.prototype.waitForImages=function(e,t){function i(){++s>=n&&t&&"function"==typeof t&&t()}var n=e.length,s=0;e.each(function(){var e=$(this);e.get(0).complete?i():e.on("load",function(){i()})})},e}();e.Carrousel=t}(util||(util={})),Gallery.prototype=new Popup;var Contact={forms:null,thisForm:null,init:function(){Contact.forms=$(".form"),Contact.elements=["input[name=Nombre]","input[name=Email]","textarea[name=Mensaje]"],Contact.forms.each(function(){var e=$(this);Contact.inputs(e).on("change",Contact.onChange),e.submit(Contact.onSubmit)})},inputs:function(e){return e.find(Contact.elements.join())},isValid:function(e){var t=e.attr("name"),i=e.val();if(!i)return!1;switch(t){case"Nombre":return i.length>3;case"Email":var n=/[\w-\.]{3,}@([\w-]{2,}\.)*([\w-]{2,}\.)[\w-]{2,4}/;return n.test(i);case"Telefono":return 10===i.replace(/[^0-9]/g,"").length;case"Mensaje":case"Descripcion":return!0;default:return console&&console.log&&console.log("Unknown validation type: "+t),!0}},onChange:function(){var e=$(this);e.data("error-element")&&(e.data("error-element").fadeOut(function(){$(this).remove()}),e.data("error-element",null),e.css("border","1px solid #CCCCCC")),Contact.isValid(e)||(e.data("error-element",$("<div>").insertAfter(e).css({color:"#f00"}).text(e.data("clue")?e.data("clue"):"Datos Invalidos").hide().fadeIn()),e.css("border","1px solid #f00"))},onSubmit:function(e){e.preventDefault();var t=$(this);Contact.thisForm=t;var i=!0;if(Contact.inputs(t).change().each(function(){var e=$(this);Contact.isValid(e)||(i=!1)}),i){var n=t.serialize(),s=$("<span>").addClass("contact-response");$.ajax({data:{host:location.hostname,data:n},dataType:"html",type:"GET",url:"http://goplek.com/mailer/send-mail.php",beforeSend:function(e,i){t.empty().append(s.text("Enviando..."))},error:function(e,i){t.css("background","none").empty().append(s.text("Error: El mensaje no puede ser enviado."))},success:function(e,i,n){console.log(e);var a=parseInt(e);1==a?t.css("background","none").empty().append(s.text("El mensaje fue enviado correctamente.")):t.css("background","none").empty().append(s.text("El mensaje no puede ser enviado. Intenta mas tarde."))}})}else alert("Hay campos invÃ¡lidos, por favor revisa las indicaciones en rojo.")}};$(Contact.init);